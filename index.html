<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»ä¸‰å­æ™ºæ…§ç®¡ç†ç³»çµ± v23 - å®Œæ•´å§“åé»åç‰ˆ</title>
    <style>
        :root {
            --primary: #00d4ff; --accent: #f72585; --warning: #ffb703;
            --bg-dark: #0b0f19; --glass: rgba(255, 255, 255, 0.05); --border: rgba(255, 255, 255, 0.1);
        }
        body {
            margin: 0; background: radial-gradient(circle at center, #1a1f35 0%, #0b0f19 100%);
            color: #e2e8f0; font-family: 'SF Pro Display', 'Microsoft JhengHei', sans-serif;
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
        }
        .dashboard {
            width: 95%; max-width: 800px; background: var(--glass); backdrop-filter: blur(20px);
            border: 1px solid var(--border); border-radius: 24px; padding: 20px;
            box-shadow: 0 40px 100px rgba(0,0,0,0.5); margin: 20px 0;
        }
        #clock { font-size: 3.2rem; font-weight: 200; color: var(--primary); text-align: center; margin: 0; letter-spacing: -1px; }
        .info-card { background: rgba(0,0,0,0.4); border-radius: 15px; padding: 12px; margin: 10px 0; border-left: 4px solid var(--primary); text-align: center; }
        
        /* åº§ä½è¡¨ä½ˆå±€å„ªåŒ– */
        .seating-chart {
            display: grid;
            grid-template-columns: repeat(7, 1fr); 
            gap: 8px; margin-top: 15px;
        }
        .seat {
            aspect-ratio: 1.1; background: rgba(255,255,255,0.03); border: 1px solid var(--border);
            border-radius: 10px; display: flex; flex-direction: column; align-items: center;
            justify-content: center; cursor: pointer; transition: 0.2s; position: relative;
            padding: 5px; box-sizing: border-box;
        }
        .seat.present { background: rgba(0, 212, 255, 0.15); border-color: var(--primary); color: #fff; }
        .seat.absent { background: rgba(247, 37, 133, 0.3); border-color: var(--accent); color: #fff; }
        .seat.late { background: rgba(255, 183, 3, 0.3); border-color: var(--warning); color: #fff; }
        
        .seat-no { font-size: 0.6rem; position: absolute; top: 4px; left: 6px; opacity: 0.5; }
        .seat-name { font-size: 0.85rem; font-weight: bold; white-space: nowrap; }

        .teacher-desk {
            grid-column: span 7; background: rgba(255,255,255,0.08); height: 35px;
            margin-bottom: 20px; border-radius: 8px; display: flex; align-items: center;
            justify-content: center; font-size: 0.8rem; letter-spacing: 8px; color: #94a3b8;
            border: 1px dashed var(--border);
        }

        .stats { display: flex; justify-content: space-around; margin: 15px 0; font-size: 0.9rem; }
        .btn-reset { width: 100%; padding: 12px; border-radius: 12px; border: none; background: #4361ee; color: white; font-weight: bold; cursor: pointer; margin-top: 15px; transition: 0.3s; }

        #login-wall { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-dark); display: flex; justify-content: center; align-items: center; z-index: 999; }
    </style>
</head>
<body>

    <div id="login-wall">
        <div class="dashboard" style="max-width: 320px; text-align:center;">
            <div style="font-size: 0.8rem; color: var(--primary); letter-spacing: 2px; margin-bottom: 15px;">CLASS 3-XIAO ADMIN</div>
            <input type="password" id="pass" style="width:100%; padding:12px; border-radius:10px; border:1px solid var(--border); background:rgba(0,0,0,0.5); color:white; text-align:center; font-size:1rem;" placeholder="è¼¸å…¥å­˜å–å¯†ç¢¼">
            <button class="btn-reset" onclick="doLogin()">é€²å…¥é»åç³»çµ±</button>
        </div>
    </div>

    <div id="main-content" style="display: none; width: 100%; align-items: center; flex-direction: column;">
        <div class="dashboard">
            <div id="clock">00:00:00</div>
            <div class="info-card">
                <div id="current-lesson" style="font-weight:bold;">åŒæ­¥èª²è¡¨ä¸­...</div>
                <div id="timer" style="color:var(--primary); font-size:0.8rem;">--:--</div>
            </div>

            <div class="stats">
                <span style="color:var(--primary)">å‡ºå¸­: <b id="count-present">0</b></span>
                <span style="color:var(--accent)">ç¼ºå¸­: <b id="count-absent">0</b></span>
                <span style="color:var(--warning)">é²åˆ°: <b id="count-late">0</b></span>
            </div>

            <div class="seating-chart" id="chart">
                <div class="teacher-desk">è¬›æ¡Œ / é»‘æ¿</div>
            </div>
            
            <button class="btn-reset" onclick="resetSeats()" style="opacity:0.8; font-size:0.8rem;">ä¸€éµé‡ç½®å‡ºå¸­ç‹€æ…‹</button>
        </div>
    </div>

    <script>
        const AUTH_PASS = "1234";
        const students = {"1":"æ—æ¹˜å‡Œ","2":"é‚±å©‰ç³","3":"é§±æ˜±å½£","4":"æ–½é›…ç‘„","5":"é …ç¿å»·","6":"æœæŸæ˜‚","7":"é™³å¿—å€«","8":"é¡éŠ˜å¾µ","9":"æ—å°šå»·","10":"å¾å¾—è»’","11":"è”¡ä¸æ©","12":"é‚±å®¥ç¿","13":"çŸ³æµ©æ–‡","14":"ç‹å“å ¯","15":"å‘¨è¾°æ—­","16":"ç‹æ·®è¬™","17":"æ—æ˜“æ¾„","18":"é»ƒå­˜è±ª","19":"æŸ³å‡±åš","20":"å­«æ²‚éˆ","21":"é¦®é–å¯Œ","22":"é™³ä½‘ç‘œ","23":"æ–½é‚¦ä½‘","24":"èŒƒèˆœç‚º","25":"è¨±ç¿”ç¡¯","26":"é™³æ•¬æ©","27":"é™³å­¸æ´‹","28":"æ±Ÿéƒæ˜Œ","29":"é„­é–æ¥·","30":"æ±Ÿæ‰¿æ©","31":"æ´ªç•¯æ¥·","32":"é„­è¿å»·","33":"ä½•æ‰¿æ©","34":"å¼µè­°æ¾§","35":"è”¡å“å®‡","36":"æ›¾æŸè«º","37":"è©¹è© å…¨","38":"æ–¹å»·ç¥","39":"é™³å‚³å¡","40":"å‘¨å½¥æˆ","41":"å³æŸè«º"};
        
        const schedule = {
            1: ["åœ‹æ–‡", "è‹±èªæœƒè©±", "è‹±èªæ–‡", "é€²éšæ•¸å­¸", "æ‡‰é›»åŠ©æ•™", "æ‡‰é›»åŠ©æ•™", "æ‡‰é›»åŠ©æ•™", "å½ˆæ€§"],
            2: ["é«”è‚²", "é›»æ©Ÿä¸»ä»»", "é›»æ©Ÿä¸»ä»»", "é–±è®€è€å¸«", "ä¼‘æ¯", "æ•¸å­¸è€å¸«", "ä¼‘æ¯", "èª²è¼”"],
            3: ["å¯¦ç¿’ä¸»ä»»", "å¯¦ç¿’ä¸»ä»»", "å¯¦ç¿’ä¸»ä»»", "è‹±èªæœƒè©±", "å¾®é›»åŠ©æ•™", "å¾®é›»åŠ©æ•™", "åœ‹æ–‡", "å½ˆæ€§"],
            4: ["æ•¸é‚åŠ©æ•™", "æ•¸é‚åŠ©æ•™", "æ•¸é‚åŠ©æ•™", "æ•¸å­¸è€å¸«", "å°ˆé¡ŒåŠ©æ•™", "å°ˆé¡ŒåŠ©æ•™", "å°ˆé¡ŒåŠ©æ•™", "è‡ªä¸»"],
            5: ["è‹±èªæ–‡", "é›»åŠ›åŠ©æ•™", "é›»åŠ›åŠ©æ•™", "é›»åŠ›åŠ©æ•™", "é«”è‚²", "é–±è®€è€å¸«", "é›»æ©Ÿä¸»ä»»", "èª²è¼”"]
        };

        function doLogin() {
            if(document.getElementById('pass').value === AUTH_PASS) {
                document.getElementById('login-wall').style.display = 'none';
                document.getElementById('main-content').style.display = 'flex';
                initSystem();
                renderSeats();
            } else { alert("å¯†ç¢¼éŒ¯èª¤"); }
        }

        function renderSeats() {
            const chart = document.getElementById('chart');
            for (let i = 1; i <= 41; i++) {
                const seat = document.createElement('div');
                seat.className = 'seat present';
                seat.id = `seat-${i}`;
                seat.innerHTML = `<span class="seat-no">${i}</span><div class="seat-name">${students[i]}</div>`;
                seat.onclick = () => toggleSeat(i);
                chart.appendChild(seat);
            }
            updateStats();
        }

        function toggleSeat(id) {
            const seat = document.getElementById(`seat-${id}`);
            if (seat.classList.contains('present')) {
                seat.classList.replace('present', 'absent');
            } else if (seat.classList.contains('absent')) {
                seat.classList.replace('absent', 'late');
            } else {
                seat.classList.replace('late', 'present');
            }
            updateStats();
        }

        function updateStats() {
            document.getElementById('count-present').innerText = document.querySelectorAll('.seat.present').length;
            document.getElementById('count-absent').innerText = document.querySelectorAll('.seat.absent').length;
            document.getElementById('count-late').innerText = document.querySelectorAll('.seat.late').length;
        }

        function resetSeats() {
            if(confirm("ç¢ºå®šè¦é‡ç½®é»åè¡¨å—ï¼Ÿ")) {
                document.querySelectorAll('.seat').forEach(s => s.className = 'seat present');
                updateStats();
            }
        }

        function initSystem() {
            const startTimes = ["08:00", "09:00", "10:00", "11:00", "13:10", "14:10", "15:10", "16:10"];
            const endTimes = ["08:50", "09:50", "10:50", "11:50", "14:00", "15:00", "16:00", "17:00"];

            setInterval(() => {
                const now = new Date();
                const day = now.getDay();
                const currentSecs = now.getHours()*3600 + now.getMinutes()*60 + now.getSeconds();
                document.getElementById('clock').innerText = now.toLocaleTimeString('zh-TW', { hour12: false });

                let lessonText = "â˜• éä¸Šèª²æ™‚æ®µ";
                let timerText = "IDLE";

                if (day >= 1 && day <= 5) {
                    for (let i = 0; i < 8; i++) {
                        const [sh, sm] = startTimes[i].split(':').map(Number);
                        const [eh, em] = endTimes[i].split(':').map(Number);
                        const sSecs = sh*3600 + sm*60;
                        const eSecs = eh*3600 + em*60;

                        if (currentSecs >= sSecs && currentSecs < eSecs) {
                            lessonText = `ç¬¬ ${i+1} ç¯€ï¼š${schedule[day][i]}`;
                            const diff = eSecs - currentSecs;
                            timerText = `ä¸‹èª²å€’æ•¸: ${Math.floor(diff/60)}åˆ†${diff%60}ç§’`;
                            break;
                        } else if (i < 7) {
                            const [nextSh, nextSm] = startTimes[i+1].split(':').map(Number);
                            const nextSSecs = nextSh*3600 + nextSm*60;
                            if (currentSecs >= eSecs && currentSecs < nextSSecs) {
                                lessonText = (i === 3) ? "ğŸ± åˆä¼‘ä¸­" : "â˜• ä¼‘æ¯æ™‚é–“";
                                const diff = nextSSecs - currentSecs;
                                timerText = `ä¸Šèª²å€’æ•¸: ${Math.floor(diff/60)}åˆ†${diff%60}ç§’`;
                                break;
                            }
                        }
                    }
                }
                document.getElementById('current-lesson').innerText = lessonText;
                document.getElementById('timer').innerText = timerText;
            }, 1000);
        }
    </script>
</body>
</html>
